<html>

<head>
	<meta charset="UTF-8" name="viewport" content="width=device-width, user-scalable=no" />

	<title>SVL</title>
	<!-- my style sheet -->
	<link rel="stylesheet" type="text/css" href="src/css/index.css" />

	<!-- Libraries -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/p5.min.js"></script> -->
	<script src="src/lib/p5.min.js"></script>
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/addons/p5.dom.min.js"></script> -->
	<script src="src/lib/p5.dom.min.js"></script>
	<!-- <script src="https://unpkg.com/ml5@0.2.1/dist/ml5.min.js"></script> -->
	<!-- <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js" type="text/javascript"></script> -->
	<script src="src/lib/ml5.min.js"></script>
	<script src="src/lib/opencv.js"></script>
	<!-- <script src="https://d3js.org/d3.v5.min.js"></script> -->
	<script src="src/lib/d3.v5.min.js"></script>

</head>

<body>
	<!-- <img src='trainingImages/AaronFront.jpg' id='trainingImage'/> -->
	<!-- Animated hamburger icon -->
	<div id="showMenuButton" class="menuButton">
		<div class='bar1'></div>
		<div class='bar2'></div>
		<div class='bar3'></div>
	</div>
	<div id="objectMenu" class="bordered scrollable menu" style="z-index:9; border-color:white">
		<div class="title">Object List</div>
	</div>

	<div id="videoWrapper">
		<div id="videoDiv"></div>
	</div>
	<div id="imageDiv"></div>

	<div id="controlDiv">
		<div id="controlDivText" class="title">...</div>
	</div>
	
	<div id="infoDiv" class="scrollable menu">

		<div id="objectName" class="title" style="margin-top:30px"></div>
		<div id="objectDistance" class="caption"></div>
		<div id="objectSize" class="caption"></div>
		<div id="objectImage" class="image"></div>
		<div id="wikipedia" class="caption"></div>
		<div id="objectNotes" class="caption"></div>
		<div id="imageCaption" class="caption"></div>

	</div>

	<div id="trainingDiv" class="scrollable menu"></div>

<!-- test -->

<!-- <video id="videoInput" width="320" height="240"></video>
<canvas id="canvasOutput" width="320" height="240"></canvas>


<script type="application/javascript" >
	var check = setInterval(function(){
		if (typeof cv.BackgroundSubtractorMOG2 != "undefined") {
			console.log('OpenCV is loaded.')
			clearInterval(check);

			let video = document.getElementById("videoInput"); // video is the id of video tag
			navigator.mediaDevices.getUserMedia({ video: true, audio: false })
			    .then(function(stream) {
			        video.srcObject = stream;
			        video.play();
			    })
			    .catch(function(err) {
			        console.log("An error occurred! " + err);
			    });
			let src = new cv.Mat(video.height, video.width, cv.CV_8UC4);
			let dst = new cv.Mat(video.height, video.width, cv.CV_8UC1);
			let cap = new cv.VideoCapture(video);

			const FPS = 30;
			function processVideo() {
		        let begin = Date.now();
		        // start processing.
		        cap.read(src);
		        cv.cvtColor(src, dst, cv.COLOR_RGBA2GRAY);
		        cv.imshow('canvasOutput', dst);
		        // schedule the next one.
		        let delay = 1000/FPS - (Date.now() - begin);
		        setTimeout(processVideo, delay);

			};

			// schedule the first one.
			setTimeout(processVideo, 0);
		}
	})
</script> -->

	<!-- load all my scripts -->

	<script src="src/js/params.js"></script>
	<script src="src/js/p5Funcs.js"></script>
	<script src="src/js/menu.js"></script>
	<script src="src/js/info.js"></script>
	<script src="src/js/images.js"></script>
	<script src="src/js/video.js"></script>
	<script src="src/js/ml5Model.js"></script>
	<script src="src/js/externalAjax.js"></script>
	<script src="src/js/resize.js"></script>
	<script src="src/js/onLoad.js"></script>

</body>

</html>
